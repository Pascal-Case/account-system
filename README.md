

# 1차 실습 프로젝트 Account(계좌 관리) 시스템 구현

## 목표
Account(계좌) 시스템은 사용자와 계좌의 정보를 저장하고 있으며, 외부 시스템에서 거래를 요청할 경우 거래 정보를 받아서 계좌에서 잔액을 거래금액만큼 줄이거나(결제), 거래금액만큼 늘리는(결제 취소) 거래 관리 기능을 제공하는 시스템입니다.
- 구현의 편의를 위해 사용자 생성 등의 관리는 API로 제공하지 않고 프로젝트 시작 시 자동으로 데이터가 입력되도록 하며, 계좌 추가/해지/확인, 거래 생성/거래 취소/거래 확인의 6가지 API를 제공합니다.

## 구현 내용
계좌 생성 및 삭제 기능: 사용자가 계좌를 생성하고 삭제할 수 있습니다. 생성된 계좌는 고유한 계좌번호를 갖고 있으며, 사용자가 삭제 요청한 경우에만 삭제됩니다.(논리적 삭제)
잔액 관리 기능: 사용자는 생성된 계좌의 잔액을 확인하고 입금/출금을 할 수 있습니다. 잔액은 실시간으로 업데이트되며, 충전 또는 인출할 수 있습니다.
계좌 목록 조회 기능: 사용자는 자신이 소유한 계좌 목록을 조회할 수 있습니다. 각 계좌의 상태와 잔액을 확인할 수 있습니다.

## 기간
2024.02.20 ~ 2024.02.26

## 기술 스택
- 언어
  - Java 17
- 프레임워크
  - Spring Boot
  - Spring Data JAP
  - Strpig Web MVC
- 개발 환경 및 생산성
  - Gradle
  - Lombok
  - Tomcat
  - IntelliJ(Ultimate Edition)
- 데이터베이스
  - H2
  - Redis
- 형상 관리
  - Git
  - GitHub
- 테스트
  - JUnit5
  - Mockito
    

## API 문서
계좌 관리 시스템은 다음과 같은 API를 제공합니다:

- **계좌 생성 API**
  - POST /account
  - 파라미터 : 사용자 아이디, 초기 잔액
  - 정책
    - 사용자가 없는 경우, 계좌가 10개(사용자당 최대 보유 가능 계좌 수)인 경우 실패 응답
    - 성공 응답 : 사용자 아이디, 계좌번호, 등록일시
  
- **계좌 해지 API**
  - DELETE /account
  - 파라미터 : 사용자 아이디, 계좌 번호
  - 정책
    - 사용자 또는 계좌가 없는 경우, 사용자 아이디와 계좌 소유주가 다른 경우, 계좌가 이미 해지 상태인 경우, 잔액이 있는 경우 실패 응답
    - 성공 응답 : 사용자 아이디, 계좌번호, 해지일시
  
-**계좌 확인 API**
  - get /account?user_id={userId}
  - 파라미터 : 사용자 아이디
  - 정책
    - 사용자 없는 경우 실패 응답
    - 성공 응답 : List<계좌번호, 잔액> 구조로 응답
  
- **잔액 사용 API**
  - POST /transaction/use
  - 파라미터 : 사용자 아이디, 계좌 번호, 거래 금액
  - 정책
    - 사용자 없는 경우, 사용자 아이디와 계좌 소유주가 다른 경우, 계좌가 이미 해지 상태인 경우, 거래금액이 잔액보다 큰 경우, 거래금액이 너무 작거나 큰 경우 실패 응답
    - 해당 계좌에서 거래(사용, 사용 취소)가 진행 중일 때 다른 거래 요청이 오는 경우 해당 거래가 동시에 잘못 처리되는 것을 방지해야 한다.
    - 성공 응답: 계좌번호, 거래 결과 코드(성공/실패), 거래 아이디, 거래금액, 거래일시
  
- **잔액 사용 취소 API**
  - POST /transaction/cancel
  - 파라미터 : 거래 아이디, 취소 요청 금액
  - 정책
    - 거래 아이디에 해당하는 거래가 없는 경우, 거래금액과 거래 취소 금액이 다른경우(부분 취소 불가능) 실패 응답
    - 1년이 넘은 거래는 사용 취소 불가능
    - 성공 응답: 계좌번호, 거래 결과 코드(성공/실패), 거래 아이디, 거래금액, 거래일시

- **거래 확인 API**
  - GET /transaction/{transactionId}
  - 파라미터 : 거래 아이디
  - 정책
    - 해당 거래 아이디의 거래가 없는 경우 실패 응답
    - 성공 응답 : 계좌번호, 거래종류(잔액 사용, 잔액 사용 취소), 거래 결과 코드(성공/실패), 거래 아이디, 거래금액, 거래일시
    - 실패한 거래(사용/사용취소)도 거래를 확인할 수 있도록 합니다.

